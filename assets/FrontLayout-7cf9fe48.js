import{p as _,m as z,g as C,u as p,c as o,a as W,t as R,b as ne,d as se,s as T,e as h,f as ie,h as D,r as Y,i as re,w as H,o as ue,j as ce,k as de,l as ve,n as me,q as ge,v as E,x as fe,I as he,y as be,z as ye,A as xe,B as Ve,C as Be,D as Se,E as ke,F as Te,G as we,H as f,J as A,K as B,L as d,M as w,N as P,O as X,P as F,Q as $,R as G,S as _e}from"./index-3b18b53b.js";import{S as M}from"./sweetalert2.all-04b561c2.js";import{V as Ce,a as pe}from"./VNavigationDrawer-f1b6995d.js";import{m as O}from"./tag-d3b7118a.js";import{V as Le}from"./index-8937723e.js";import{m as Ne,a as Ae,b as Z,u as ee,c as Pe,d as Ie,e as te,V as Re,f as j,g as Ee,h as De,M as He,i as I}from"./index-2f9b8ed2.js";import{u as $e,V as J,a as Me}from"./VList-fdd0f272.js";import{m as Ue,V as q,a as Fe,u as je}from"./VBtn-f0f15363.js";import{V as K}from"./VContainer-268c176c.js";import"./scopeId-6036f308.js";import"./VAvatar-af59b7c0.js";/* empty css              */const ae=_({text:String,...z(),...O()},"VToolbarTitle"),oe=C()({name:"VToolbarTitle",props:ae(),setup(e,u){let{slots:t}=u;return p(()=>{const a=!!(t.default||t.text||e.text);return o(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var i;return[a&&o("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(i=t.default)==null?void 0:i.call(t)])]}})}),{}}}),qe=[null,"prominent","default","comfortable","compact"],le=_({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>qe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ne(),...z(),...Ae(),...Z(),...O({tag:"header"}),...W()},"VToolbar"),Q=C()({name:"VToolbar",props:le(),setup(e,u){var c;let{slots:t}=u;const{backgroundColorClasses:a,backgroundColorStyles:i}=ee(R(e,"color")),{borderClasses:n}=Pe(e),{elevationClasses:m}=Ie(e),{roundedClasses:g}=te(e),{themeClasses:b}=ne(e),{rtlClasses:v}=se(),s=T(!!(e.extended||(c=t.extension)!=null&&c.call(t))),y=h(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),l=h(()=>s.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ie({VBtn:{variant:"text"}}),p(()=>{var r;const x=!!(e.title||t.title),V=!!(t.image||e.image),S=(r=t.extension)==null?void 0:r.call(t);return s.value=!!(e.extended||S),o(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,n.value,m.value,g.value,b.value,v.value,e.class],style:[i.value,e.style]},{default:()=>[V&&o("div",{key:"image",class:"v-toolbar__image"},[t.image?o(j,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(Re,{key:"image-img",cover:!0,src:e.image},null)]),o(j,{defaults:{VTabs:{height:D(y.value)}}},{default:()=>{var k,L,N;return[o("div",{class:"v-toolbar__content",style:{height:D(y.value)}},[t.prepend&&o("div",{class:"v-toolbar__prepend"},[(k=t.prepend)==null?void 0:k.call(t)]),x&&o(oe,{key:"title",text:e.title},{text:t.title}),(L=t.default)==null?void 0:L.call(t),t.append&&o("div",{class:"v-toolbar__append"},[(N=t.append)==null?void 0:N.call(t)])])]}}),o(j,{defaults:{VTabs:{height:D(l.value)}}},{default:()=>[o(Le,null,{default:()=>[s.value&&o("div",{class:"v-toolbar__extension",style:{height:D(l.value)}},[S])]})]})]})}),{contentHeight:y,extensionHeight:l}}}),ze=_({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Ye(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=u;let a=0;const i=Y(null),n=T(0),m=T(0),g=T(0),b=T(!1),v=T(!1),s=h(()=>Number(e.scrollThreshold)),y=h(()=>re((s.value-n.value)/s.value||0)),l=()=>{const c=i.value;!c||t&&!t.value||(a=n.value,n.value="window"in c?c.pageYOffset:c.scrollTop,v.value=n.value<a,g.value=Math.abs(n.value-s.value))};return H(v,()=>{m.value=m.value||n.value}),H(b,()=>{m.value=0}),ue(()=>{H(()=>e.scrollTarget,c=>{var V;const x=c?document.querySelector(c):window;x&&x!==i.value&&((V=i.value)==null||V.removeEventListener("scroll",l),i.value=x,i.value.addEventListener("scroll",l,{passive:!0}))},{immediate:!0})}),ce(()=>{var c;(c=i.value)==null||c.removeEventListener("scroll",l)}),t&&H(t,l,{immediate:!0}),{scrollThreshold:s,currentScroll:n,currentThreshold:g,isScrollActive:b,scrollRatio:y,isScrollingUp:v,savedScroll:m}}const Oe=_({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...le(),...de(),...ze(),height:{type:[Number,String],default:64}},"VAppBar"),Xe=C()({name:"VAppBar",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:t}=u;const a=Y(),i=ve(e,"modelValue"),n=h(()=>{var k;const r=new Set(((k=e.scrollBehavior)==null?void 0:k.split(" "))??[]);return{hide:r.has("hide"),inverted:r.has("inverted"),collapse:r.has("collapse"),elevate:r.has("elevate"),fadeImage:r.has("fade-image")}}),m=h(()=>{const r=n.value;return r.hide||r.inverted||r.collapse||r.elevate||r.fadeImage||!i.value}),{currentScroll:g,scrollThreshold:b,isScrollingUp:v,scrollRatio:s}=Ye(e,{canScroll:m}),y=h(()=>e.collapse||n.value.collapse&&(n.value.inverted?s.value>0:s.value===0)),l=h(()=>e.flat||n.value.elevate&&(n.value.inverted?g.value>0:g.value===0)),c=h(()=>n.value.fadeImage?n.value.inverted?1-s.value:s.value:void 0),x=h(()=>{var L,N;if(n.value.hide&&n.value.inverted)return 0;const r=((L=a.value)==null?void 0:L.contentHeight)??0,k=((N=a.value)==null?void 0:N.extensionHeight)??0;return r+k});me(h(()=>!!e.scrollBehavior),()=>{fe(()=>{n.value.hide?n.value.inverted?i.value=g.value>b.value:i.value=v.value||g.value<b.value:i.value=!0})});const{ssrBootStyles:V}=$e(),{layoutItemStyles:S}=ge({id:e.name,order:h(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:x,elementSize:T(void 0),active:i,absolute:R(e,"absolute")});return p(()=>{const r=Q.filterProps(e);return o(Q,E({ref:a,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...S.value,"--v-toolbar-image-opacity":c.value,height:void 0,...V.value},e.style]},r,{collapse:y.value,flat:l.value}),t)}),{}}}),Ge=_({...Ue({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Je=C()({name:"VAppBarNavIcon",props:Ge(),setup(e,u){let{slots:t}=u;return p(()=>o(q,E(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),U=C()({name:"VAppBarTitle",props:ae(),setup(e,u){let{slots:t}=u;return p(()=>o(oe,E(e,{class:"v-app-bar-title"}),t)),{}}});const Ke=_({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:he,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...z(),...Fe({location:"top end"}),...Z(),...O(),...W(),...Ee({transition:"scale-rotate-transition"})},"VBadge"),Qe=C()({name:"VBadge",inheritAttrs:!1,props:Ke(),setup(e,u){const{backgroundColorClasses:t,backgroundColorStyles:a}=ee(R(e,"color")),{roundedClasses:i}=te(e),{t:n}=be(),{textColorClasses:m,textColorStyles:g}=De(R(e,"textColor")),{themeClasses:b}=ye(),{locationStyles:v}=je(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?+(e.offsetY??0):["left","right"].includes(s)?+(e.offsetX??0):0));return p(()=>{const s=Number(e.content),y=!e.max||isNaN(s)?e.content:s<=+e.max?s:`${e.max}+`,[l,c]=xe(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return o(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},c,{style:e.style}),{default:()=>{var x,V;return[o("div",{class:"v-badge__wrapper"},[(V=(x=u.slots).default)==null?void 0:V.call(x),o(He,{transition:e.transition},{default:()=>{var S,r;return[Ve(o("span",E({class:["v-badge__badge",b.value,t.value,i.value,m.value],style:[a.value,g.value,e.inline?{}:v.value],"aria-atomic":"true","aria-label":n(e.label,s),"aria-live":"polite",role:"status"},l),[e.dot?void 0:u.slots.badge?(r=(S=u.slots).badge)==null?void 0:r.call(S):e.icon?o(I,{icon:e.icon},null):y]),[[Be,e.modelValue]])]}})])]}})}),{}}}),ct={__name:"FrontLayout",setup(e){const{apiAuth:u}=_e(),t=Se(),a=ke(),{mobile:i}=Te(),n=h(()=>i.value),m=Y(!1),g=h(()=>[{to:"/map",text:"地圖",icon:"mdi-map-marker",show:(!a.isLogin||a.isLogin)&&!a.isAdmin},{to:"/about",text:"關於",icon:"mdi-folder-account",show:(!a.isLogin||a.isLogin)&&!a.isAdmin},{to:"/",text:"首頁",icon:"mdi-home",show:(!a.isLogin||a.isLogin)&&!a.isAdmin},{to:"/menu",text:"訂購",icon:"mdi-list-box",show:a.isLogin||a.isAdmin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:a.isLogin},{to:"/orders",text:"訂單",icon:"mdi-list-status",show:a.isLogin||a.isAdmin},{to:"/login",text:"登入",icon:"mdi-login",show:!a.isLogin},{to:"/admin",text:"管理",icon:"mdi-cog",show:a.isLogin&&a.isAdmin}]),b=async()=>{try{M.fire({title:"登出嗎?",text:"按下確定鍵登出。",icon:"question",showDenyButton:!0,confirmButtonText:"確定",denyButtonText:"取消"}).then(async v=>{v.isConfirmed?(await M.fire({title:"登出成功",text:"您即將登出...",icon:"success",showConfirmButton:!1,timer:800}),await u.delete("/users/logout"),a.logout()):v.isDenied&&M.fire({title:"登出取消",icon:"info",showConfirmButton:!1,timer:500})}),t.push("/")}catch{M.fire({position:"center",icon:"error",title:"登出失敗",confirmButtonText:"確定"})}};return(v,s)=>{const y=we("RouterView");return f(),A(P,null,[n.value?(f(),B(Ce,{key:0,modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=l=>m.value=l),temporary:"",location:"right",color:"secondary"},{default:d(()=>[o(Me,{nav:""},{default:d(()=>[(f(!0),A(P,null,X(g.value,l=>(f(),A(P,{key:l.to},[l.show?(f(),B(J,{key:0,to:l.to},{prepend:d(()=>[o(I,{icon:l.icon},null,8,["icon"])]),append:d(()=>[l.to==="/cart"?(f(),B(Qe,{key:0,color:"error",content:F(a).cart,inline:""},null,8,["content"])):w("",!0),o(U,null,{default:d(()=>[$(G(l.text),1)]),_:2},1024)]),_:2},1032,["to"])):w("",!0)],64))),128)),F(a).isLogin?(f(),B(J,{key:0,onClick:b},{prepend:d(()=>[o(I,{icon:"mdi-logout"})]),append:d(()=>[o(U,null,{default:d(()=>[$("登出")]),_:1})]),_:1})):w("",!0)]),_:1})]),_:1},8,["modelValue"])):w("",!0),o(Xe,{color:"secondary"},{default:d(()=>[n.value?(f(),B(K,{key:0,class:"d-flex align-center justify-end"},{default:d(()=>[o(Je,{onClick:s[1]||(s[1]=l=>m.value=!0),color:"text01"})]),_:1})):(f(),B(K,{key:1,class:"d-flex align-center justify-center"},{default:d(()=>[(f(!0),A(P,null,X(g.value,l=>(f(),A(P,{key:l.to},[l.show?(f(),B(q,{key:0,class:"mx-1",to:l==null?void 0:l.to,color:"text01",title:"button.text"},{default:d(()=>[o(I,{icon:l.icon},null,8,["icon"]),o(U,null,{default:d(()=>[$(G(l.text),1)]),_:2},1024)]),_:2},1032,["to"])):w("",!0)],64))),128)),F(a).isLogin?(f(),B(q,{key:0,class:"mx-1",onClick:b,color:"text01",title:"button.text"},{prepend:d(()=>[o(I,{icon:"mdi-logout"}),o(U,null,{default:d(()=>[$("登出")]),_:1})]),_:1})):w("",!0)]),_:1}))]),_:1}),o(pe,null,{default:d(()=>[(f(),B(y,{key:v.$route.path}))]),_:1})],64)}}};export{ct as default};
