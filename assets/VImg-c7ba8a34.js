import{p as k,e as f,h as b,m as F,g as q,u as D,c as i,aq as P,aP as Y,ba as H,bb as p,bc as ee,bd as te,aV as ne,V as re,v as E,a6 as ae,aZ as M,t as se,ay as ie,s as C,r as oe,w as N,a5 as le,W as ue,j as ce,B as O,al as de,N as ge,C as ve}from"./index-4d47d133.js";const me=k({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function fe(e){return{dimensionStyles:f(()=>({height:b(e.height),maxHeight:b(e.maxHeight),maxWidth:b(e.maxWidth),minHeight:b(e.minHeight),minWidth:b(e.minWidth),width:b(e.width)}))}}function be(e){return{aspectStyles:f(()=>{const n=Number(e.aspectRatio);return n?{paddingBottom:String(1/n*100)+"%"}:void 0})}}const A=k({aspectRatio:[String,Number],contentClass:String,inline:Boolean,...F(),...me()},"VResponsive"),U=q()({name:"VResponsive",props:A(),setup(e,n){let{slots:r}=n;const{aspectStyles:t}=be(e),{dimensionStyles:s}=fe(e);return D(()=>{var d;return i("div",{class:["v-responsive",{"v-responsive--inline":e.inline},e.class],style:[s.value,e.style]},[i("div",{class:"v-responsive__sizer",style:t.value},null),(d=r.additional)==null?void 0:d.call(r),r.default&&i("div",{class:["v-responsive__content",e.contentClass]},[r.default()])])}),{}}});function L(e){return Y(()=>{const n=[],r={};if(e.value.background)if(H(e.value.background)){if(r.backgroundColor=e.value.background,!e.value.text&&p(e.value.background)){const t=ee(e.value.background);if(t.a==null||t.a===1){const s=te(t);r.color=s,r.caretColor=s}}}else n.push(`bg-${e.value.background}`);return e.value.text&&(H(e.value.text)?(r.color=e.value.text,r.caretColor=e.value.text):n.push(`text-${e.value.text}`)),{colorClasses:n,colorStyles:r}})}function ze(e,n){const r=f(()=>({text:P(e)?e.value:n?e[n]:null})),{colorClasses:t,colorStyles:s}=L(r);return{textColorClasses:t,textColorStyles:s}}function Se(e,n){const r=f(()=>({background:P(e)?e.value:n?e[n]:null})),{colorClasses:t,colorStyles:s}=L(r);return{backgroundColorClasses:t,backgroundColorStyles:s}}const he=k({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function ye(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ne();return{roundedClasses:f(()=>{const t=P(e)?e.value:e.rounded,s=[];if(t===!0||t==="")s.push(`${n}--rounded`);else if(typeof t=="string"||t===0)for(const d of String(t).split(" "))s.push(`rounded-${d}`);return s})}}const _e=k({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:e=>e!==!0}},"transition"),I=(e,n)=>{let{slots:r}=n;const{transition:t,disabled:s,...d}=e,{component:S=ae,...g}=typeof t=="object"?t:{};return re(S,E(typeof t=="string"?{name:s?"":t}:g,d,{disabled:s}),r)};function Ce(e,n){if(!M)return;const r=n.modifiers||{},t=n.value,{handler:s,options:d}=typeof t=="object"?t:{handler:t,options:{}},S=new IntersectionObserver(function(){var v;let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments.length>1?arguments[1]:void 0;const o=(v=e._observe)==null?void 0:v[n.instance.$.uid];if(!o)return;const l=g.some(h=>h.isIntersecting);s&&(!r.quiet||o.init)&&(!r.once||l||o.init)&&s(l,g,x),l&&r.once?Z(e,n):o.init=!0},d);e._observe=Object(e._observe),e._observe[n.instance.$.uid]={init:!1,observer:S},S.observe(e)}function Z(e,n){var t;const r=(t=e._observe)==null?void 0:t[n.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[n.instance.$.uid])}const ke={mounted:Ce,unmounted:Z},xe=ke,Ie=k({alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...A(),...F(),...he(),..._e()},"VImg"),Ne=q()({name:"VImg",directives:{intersect:xe},props:Ie(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,n){let{emit:r,slots:t}=n;const{backgroundColorClasses:s,backgroundColorStyles:d}=Se(se(e,"color")),{roundedClasses:S}=ye(e),g=ie("VImg"),x=C(""),o=oe(),l=C(e.eager?"loading":"idle"),v=C(),h=C(),c=f(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),y=f(()=>c.value.aspect||v.value/h.value||0);N(()=>e.src,()=>{R(l.value!=="idle")}),N(y,(a,u)=>{!a&&u&&o.value&&_(o.value)}),le(()=>R());function R(a){if(!(e.eager&&a)&&!(M&&!a&&!e.eager)){if(l.value="loading",c.value.lazySrc){const u=new Image;u.src=c.value.lazySrc,_(u,null)}c.value.src&&ue(()=>{var u;r("loadstart",((u=o.value)==null?void 0:u.currentSrc)||c.value.src),setTimeout(()=>{var m;if(!g.isUnmounted)if((m=o.value)!=null&&m.complete){if(o.value.naturalWidth||V(),l.value==="error")return;y.value||_(o.value,null),l.value==="loading"&&w()}else y.value||_(o.value),T()})})}}function w(){var a;g.isUnmounted||(T(),_(o.value),l.value="loaded",r("load",((a=o.value)==null?void 0:a.currentSrc)||c.value.src))}function V(){var a;g.isUnmounted||(l.value="error",r("error",((a=o.value)==null?void 0:a.currentSrc)||c.value.src))}function T(){const a=o.value;a&&(x.value=a.currentSrc||a.src)}let z=-1;ce(()=>{clearTimeout(z)});function _(a){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const m=()=>{if(clearTimeout(z),g.isUnmounted)return;const{naturalHeight:$,naturalWidth:j}=a;$||j?(v.value=j,h.value=$):!a.complete&&l.value==="loading"&&u!=null?z=window.setTimeout(m,u):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(v.value=1,h.value=1)};m()}const W=f(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),G=()=>{var m;if(!c.value.src||l.value==="idle")return null;const a=i("img",{class:["v-img__img",W.value],style:{objectPosition:e.position},src:c.value.src,srcset:c.value.srcset,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:o,onLoad:w,onError:V},null),u=(m=t.sources)==null?void 0:m.call(t);return i(I,{transition:e.transition,appear:!0},{default:()=>[O(u?i("picture",{class:"v-img__picture"},[u,a]):a,[[ve,l.value==="loaded"]])]})},J=()=>i(I,{transition:e.transition},{default:()=>[c.value.lazySrc&&l.value!=="loaded"&&i("img",{class:["v-img__img","v-img__img--preload",W.value],style:{objectPosition:e.position},src:c.value.lazySrc,alt:e.alt,crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),K=()=>t.placeholder?i(I,{transition:e.transition,appear:!0},{default:()=>[(l.value==="loading"||l.value==="error"&&!t.error)&&i("div",{class:"v-img__placeholder"},[t.placeholder()])]}):null,Q=()=>t.error?i(I,{transition:e.transition,appear:!0},{default:()=>[l.value==="error"&&i("div",{class:"v-img__error"},[t.error()])]}):null,X=()=>e.gradient?i("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,B=C(!1);{const a=N(y,u=>{u&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{B.value=!0})}),a())})}return D(()=>{const a=U.filterProps(e);return O(i(U,E({class:["v-img",{"v-img--booting":!B.value},s.value,S.value,e.class],style:[{width:b(e.width==="auto"?v.value:e.width)},d.value,e.style]},a,{aspectRatio:y.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>i(ge,null,[i(G,null,null),i(J,null,null),i(X,null,null),i(K,null,null),i(Q,null,null)]),default:t.default}),[[de("intersect"),{handler:R,options:e.options},null,{once:!0}]])}),{currentSrc:x,image:o,state:l,naturalWidth:v,naturalHeight:h}}});export{xe as I,I as M,Ne as V,ye as a,_e as b,ze as c,me as d,fe as e,L as f,he as m,Se as u};
