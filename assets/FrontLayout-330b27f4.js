import{p as I,m as J,g as P,u as A,c as a,a as ee,t as M,b as ie,d as ue,s as N,e as b,f as ce,h as U,r as K,i as de,w as G,o as ve,j as me,k as ge,l as fe,n as be,q as he,v as F,x as ye,I as xe,y as ke,z as pe,A as Ve,B as _e,C as Be,_ as Se,D as we,E as Te,F as Ce,G as W,H as r,J as p,K as y,L as i,M as _,N as V,O as E,P as H,Q as T,R as $,S as Le}from"./index-d3dd28c5.js";import{S as j}from"./sweetalert2.all-04b561c2.js";import{V as Ne,a as Ie}from"./VNavigationDrawer-314ed895.js";import{m as Q}from"./tag-9973796e.js";import{V as Pe}from"./index-40810cd0.js";import{m as Ae,a as Re,b as te,u as ae,c as De,d as Ee,e as oe,V as le,f as Y,g as He,h as $e,M as Me,i as L}from"./index-18fe2d18.js";import{u as Fe,V as q,a as Ue}from"./VList-fcdaf33d.js";import{m as Ge,V as z,a as je,u as qe}from"./VBtn-1e4ea61f.js";import{V as O}from"./VContainer-f2d8422f.js";import"./scopeId-96dadfe6.js";import"./VAvatar-136d735d.js";/* empty css              */const ze=""+new URL("logo-91734842.png",import.meta.url).href;const ne=I({text:String,...J(),...Q()},"VToolbarTitle"),se=P()({name:"VToolbarTitle",props:ne(),setup(e,v){let{slots:o}=v;return A(()=>{const l=!!(o.default||o.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var u;return[l&&a("div",{class:"v-toolbar-title__placeholder"},[o.text?o.text():e.text,(u=o.default)==null?void 0:u.call(o)])]}})}),{}}}),Ye=[null,"prominent","default","comfortable","compact"],re=I({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Ye.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Ae(),...J(),...Re(),...te(),...Q({tag:"header"}),...ee()},"VToolbar"),Z=P()({name:"VToolbar",props:re(),setup(e,v){var d;let{slots:o}=v;const{backgroundColorClasses:l,backgroundColorStyles:u}=ae(M(e,"color")),{borderClasses:s}=De(e),{elevationClasses:h}=Ee(e),{roundedClasses:g}=oe(e),{themeClasses:x}=ie(e),{rtlClasses:k}=ue(),n=N(!!(e.extended||(d=o.extension)!=null&&d.call(o))),f=b(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),m=b(()=>n.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ce({VBtn:{variant:"text"}}),A(()=>{var c;const t=!!(e.title||o.title),B=!!(o.image||e.image),S=(c=o.extension)==null?void 0:c.call(o);return n.value=!!(e.extended||S),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},l.value,s.value,h.value,g.value,x.value,k.value,e.class],style:[u.value,e.style]},{default:()=>[B&&a("div",{key:"image",class:"v-toolbar__image"},[o.image?a(Y,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},o.image):a(le,{key:"image-img",cover:!0,src:e.image},null)]),a(Y,{defaults:{VTabs:{height:U(f.value)}}},{default:()=>{var w,R,D;return[a("div",{class:"v-toolbar__content",style:{height:U(f.value)}},[o.prepend&&a("div",{class:"v-toolbar__prepend"},[(w=o.prepend)==null?void 0:w.call(o)]),t&&a(se,{key:"title",text:e.title},{text:o.title}),(R=o.default)==null?void 0:R.call(o),o.append&&a("div",{class:"v-toolbar__append"},[(D=o.append)==null?void 0:D.call(o)])])]}}),a(Y,{defaults:{VTabs:{height:U(m.value)}}},{default:()=>[a(Pe,null,{default:()=>[n.value&&a("div",{class:"v-toolbar__extension",style:{height:U(m.value)}},[S])]})]})]})}),{contentHeight:f,extensionHeight:m}}}),Oe=I({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Xe(e){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=v;let l=0;const u=K(null),s=N(0),h=N(0),g=N(0),x=N(!1),k=N(!1),n=b(()=>Number(e.scrollThreshold)),f=b(()=>de((n.value-s.value)/n.value||0)),m=()=>{const d=u.value;!d||o&&!o.value||(l=s.value,s.value="window"in d?d.pageYOffset:d.scrollTop,k.value=s.value<l,g.value=Math.abs(s.value-n.value))};return G(k,()=>{h.value=h.value||s.value}),G(x,()=>{h.value=0}),ve(()=>{G(()=>e.scrollTarget,d=>{var B;const t=d?document.querySelector(d):window;t&&t!==u.value&&((B=u.value)==null||B.removeEventListener("scroll",m),u.value=t,u.value.addEventListener("scroll",m,{passive:!0}))},{immediate:!0})}),me(()=>{var d;(d=u.value)==null||d.removeEventListener("scroll",m)}),o&&G(o,m,{immediate:!0}),{scrollThreshold:n,currentScroll:s,currentThreshold:g,isScrollActive:x,scrollRatio:f,isScrollingUp:k,savedScroll:h}}const Je=I({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...re(),...ge(),...Oe(),height:{type:[Number,String],default:64}},"VAppBar"),Ke=P()({name:"VAppBar",props:Je(),emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:o}=v;const l=K(),u=fe(e,"modelValue"),s=b(()=>{var w;const c=new Set(((w=e.scrollBehavior)==null?void 0:w.split(" "))??[]);return{hide:c.has("hide"),inverted:c.has("inverted"),collapse:c.has("collapse"),elevate:c.has("elevate"),fadeImage:c.has("fade-image")}}),h=b(()=>{const c=s.value;return c.hide||c.inverted||c.collapse||c.elevate||c.fadeImage||!u.value}),{currentScroll:g,scrollThreshold:x,isScrollingUp:k,scrollRatio:n}=Xe(e,{canScroll:h}),f=b(()=>e.collapse||s.value.collapse&&(s.value.inverted?n.value>0:n.value===0)),m=b(()=>e.flat||s.value.elevate&&(s.value.inverted?g.value>0:g.value===0)),d=b(()=>s.value.fadeImage?s.value.inverted?1-n.value:n.value:void 0),t=b(()=>{var R,D;if(s.value.hide&&s.value.inverted)return 0;const c=((R=l.value)==null?void 0:R.contentHeight)??0,w=((D=l.value)==null?void 0:D.extensionHeight)??0;return c+w});be(b(()=>!!e.scrollBehavior),()=>{ye(()=>{s.value.hide?s.value.inverted?u.value=g.value>x.value:u.value=k.value||g.value<x.value:u.value=!0})});const{ssrBootStyles:B}=Fe(),{layoutItemStyles:S}=he({id:e.name,order:b(()=>parseInt(e.order,10)),position:M(e,"location"),layoutSize:t,elementSize:N(void 0),active:u,absolute:M(e,"absolute")});return A(()=>{const c=Z.filterProps(e);return a(Z,F({ref:l,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...S.value,"--v-toolbar-image-opacity":d.value,height:void 0,...B.value},e.style]},c,{collapse:f.value,flat:m.value}),o)}),{}}}),Qe=I({...Ge({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),We=P()({name:"VAppBarNavIcon",props:Qe(),setup(e,v){let{slots:o}=v;return A(()=>a(z,F(e,{class:["v-app-bar-nav-icon"]}),o)),{}}}),C=P()({name:"VAppBarTitle",props:ne(),setup(e,v){let{slots:o}=v;return A(()=>a(se,F(e,{class:"v-app-bar-title"}),o)),{}}});const Ze=I({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:xe,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...J(),...je({location:"top end"}),...te(),...Q(),...ee(),...He({transition:"scale-rotate-transition"})},"VBadge"),X=P()({name:"VBadge",inheritAttrs:!1,props:Ze(),setup(e,v){const{backgroundColorClasses:o,backgroundColorStyles:l}=ae(M(e,"color")),{roundedClasses:u}=oe(e),{t:s}=ke(),{textColorClasses:h,textColorStyles:g}=$e(M(e,"textColor")),{themeClasses:x}=pe(),{locationStyles:k}=qe(e,!0,n=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(n)?+(e.offsetY??0):["left","right"].includes(n)?+(e.offsetX??0):0));return A(()=>{const n=Number(e.content),f=!e.max||isNaN(n)?e.content:n<=+e.max?n:`${e.max}+`,[m,d]=Ve(v.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(e.tag,F({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},d,{style:e.style}),{default:()=>{var t,B;return[a("div",{class:"v-badge__wrapper"},[(B=(t=v.slots).default)==null?void 0:B.call(t),a(Me,{transition:e.transition},{default:()=>{var S,c;return[_e(a("span",F({class:["v-badge__badge",x.value,o.value,u.value,h.value],style:[l.value,g.value,e.inline?{}:k.value],"aria-atomic":"true","aria-label":s(e.label,n),"aria-live":"polite",role:"status"},m),[e.dot?void 0:v.slots.badge?(c=(S=v.slots).badge)==null?void 0:c.call(S):e.icon?a(L,{icon:e.icon},null):f]),[[Be,e.modelValue]])]}})])]}})}),{}}}),et={__name:"FrontLayout",setup(e){const{apiAuth:v}=Le(),o=we(),l=Te(),{mobile:u}=Ce(),s=b(()=>u.value),h=K(!1),g=b(()=>[{to:"/",text:"首頁",icon:"mdi-home",show:!0},{to:"/news",text:"最新消息",icon:"mdi-newspaper",show:!0},{to:"/map",text:"地圖",icon:"mdi-map-marker",show:!0},{to:"/about",text:"關於本棧",icon:"mdi-folder-account",show:!0}]),x=b(()=>[{to:"/menu",text:"訂購",icon:"mdi-list-box",show:l.isLogin||l.isAdmin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:l.isLogin},{to:"/orders",text:"訂單",icon:"mdi-list-status",show:l.isLogin||l.isAdmin},{to:"/login",text:"登入",icon:"mdi-login",show:!l.isLogin},{to:"/admin",text:"管理",icon:"mdi-cog",show:l.isLogin&&l.isAdmin}]),k=async()=>{try{j.fire({title:"登出嗎?",text:"按下確定鍵登出。",icon:"question",showDenyButton:!0,confirmButtonText:"確定",denyButtonText:"取消"}).then(async n=>{n.isConfirmed?(await j.fire({title:"登出成功",text:"您即將登出...",icon:"success",showConfirmButton:!1,timer:800}),await v.delete("/users/logout"),l.logout()):n.isDenied&&j.fire({title:"登出取消",icon:"info",showConfirmButton:!1,timer:500})}),o.push("/")}catch{j.fire({position:"center",icon:"error",title:"登出失敗",confirmButtonText:"確定"})}};return(n,f)=>{const m=W("Div"),d=W("RouterView");return r(),p(V,null,[s.value?(r(),y(Ne,{key:0,modelValue:h.value,"onUpdate:modelValue":f[0]||(f[0]=t=>h.value=t),temporary:"",location:"right",color:"secondary"},{default:i(()=>[a(Ue,{nav:""},{default:i(()=>[(r(!0),p(V,null,E(g.value,t=>(r(),p(V,{key:t.to},[t.show?(r(),y(q,{key:0,to:t.to},{prepend:i(()=>[a(L,{icon:t.icon},null,8,["icon"])]),append:i(()=>[t.to==="/cart"?(r(),y(X,{key:0,color:"error",content:H(l).cart,inline:""},null,8,["content"])):_("",!0),a(C,null,{default:i(()=>[T($(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):_("",!0)],64))),128)),(r(!0),p(V,null,E(g.value,t=>(r(),p(V,{key:t.to},[t.show?(r(),y(q,{key:0,to:t.to},{prepend:i(()=>[a(L,{icon:t.icon},null,8,["icon"])]),append:i(()=>[t.to==="/cart"?(r(),y(X,{key:0,color:"error",content:H(l).cart,inline:""},null,8,["content"])):_("",!0),a(C,null,{default:i(()=>[T($(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):_("",!0)],64))),128)),(r(!0),p(V,null,E(x.value,t=>(r(),p(V,{key:t.to},[t.show?(r(),y(q,{key:0,to:t.to},{prepend:i(()=>[a(L,{icon:t.icon},null,8,["icon"])]),append:i(()=>[t.to==="/cart"?(r(),y(X,{key:0,color:"error",content:H(l).cart,inline:""},null,8,["content"])):_("",!0),a(C,null,{default:i(()=>[T($(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):_("",!0)],64))),128)),H(l).isLogin?(r(),y(q,{key:0,onClick:k},{prepend:i(()=>[a(L,{icon:"mdi-logout"})]),append:i(()=>[a(C,null,{default:i(()=>[T("登出")]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1},8,["modelValue"])):_("",!0),a(le,{id:"logo",src:ze}),a(m,{id:"eaves",style:{background:"url('../../src/assets/BackGround/bg1.png')"}}),a(m,{class:"bambooLeft",style:{background:"url('../../src/assets/BackGround/bg2.png') no-repeat center/cover"}}),a(m,{class:"bambooRight",style:{background:"url('../../src/assets/BackGround/bg2.png') no-repeat center/cover"}}),a(m,{class:"bambooCenterLeft",style:{background:"url('../../src/assets/BackGround/bg2.png') no-repeat center/cover"}}),a(m,{class:"bambooCenterRight",style:{background:"url('../../src/assets/BackGround/bg2.png') no-repeat center/cover"}}),a(Ke,{color:"secondary",style:{position:"fixed",top:"45px"}},{default:i(()=>[s.value?(r(),y(O,{key:0,class:"d-flex align-center justify-end"},{default:i(()=>[a(We,{onClick:f[1]||(f[1]=t=>h.value=!0),color:"text01"})]),_:1})):(r(),p(V,{key:1},[a(O,{class:"d-flex align-center justify-center"},{default:i(()=>[(r(!0),p(V,null,E(g.value,t=>(r(),p(V,{key:t.to},[t.show?(r(),y(z,{key:0,class:"mx-1",to:t==null?void 0:t.to,color:"text01",title:"button.text"},{default:i(()=>[a(C,null,{default:i(()=>[T($(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):_("",!0)],64))),128))]),_:1}),a(O,{class:"d-flex align-center justify-center"},{default:i(()=>[(r(!0),p(V,null,E(x.value,t=>(r(),p(V,{key:t.to},[t.show?(r(),y(z,{key:0,class:"mx-1",to:t==null?void 0:t.to,color:"text01",title:"button.text"},{default:i(()=>[a(L,{icon:t.icon},null,8,["icon"]),a(C,null,{default:i(()=>[T($(t.text),1)]),_:2},1024)]),_:2},1032,["to"])):_("",!0)],64))),128)),H(l).isLogin?(r(),y(z,{key:0,class:"mx-1",onClick:k,color:"text01",title:"button.text"},{prepend:i(()=>[a(L,{icon:"mdi-logout"}),a(C,null,{default:i(()=>[T("登出")]),_:1})]),_:1})):_("",!0)]),_:1})],64))]),_:1}),a(Ie,null,{default:i(()=>[(r(),y(d,{key:n.$route.path}))]),_:1})],64)}}},mt=Se(et,[["__scopeId","data-v-ab1fbea4"]]);export{mt as default};
